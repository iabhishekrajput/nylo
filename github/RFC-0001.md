# RFC-0001: WTX-1 Cross-Domain Context Preservation

**Status:** Open for Discussion
**Author:** Nylo Contributors
**Created:** 2026-02-17

## Summary

The WTX-1 protocol enables pseudonymous identity preservation across unrelated domains without third-party cookies, login requirements, or personal data collection. This RFC invites community input on the protocol's design decisions and trade-offs.

## Background

When a user navigates from `site-a.com` to `site-b.com`, traditional analytics loses the connection. The WTX-1 protocol solves this by generating a pseudonymous identifier (WaiTag) and transferring it via URL parameters or `postMessage` when the user crosses domains.

The identifier contains:
- A timestamp (base-36 encoded)
- Cryptographic random bytes (Web Crypto API)
- A one-way domain hash

No component is derived from personal information.

## Open Questions

We'd like community input on the following design decisions:

### 1. Token Transport Mechanism

Currently, WTX-1 uses URL parameters (`?nylo_token=...`) as the primary transport and `postMessage` as a fallback for iframe-based navigation.

- **URL parameters** are visible in browser history and server logs. Is this acceptable for a pseudonymous token?
- Should we support `Navigation API` or `URL fragment` (`#`) transport as alternatives?
- Are there edge cases with URL parameter transport that we're missing (e.g., URL length limits, CDN stripping)?

### 2. Token Expiry Window

Tokens currently expire after **5 minutes**. This balances security against slow navigations.

- Is 5 minutes the right window? Too short for some flows (e.g., email click-throughs)? Too long for security?
- Should expiry be configurable per-domain or per-customer?
- Should there be a "one-time use" mode where tokens are invalidated after first verification?

### 3. Safari ITP and Storage Partitioning

Safari's Intelligent Tracking Prevention partitions localStorage by eTLD+1 and caps first-party cookies at 7 days (24 hours if set by JavaScript).

- The current three-layer storage (cookie, localStorage, sessionStorage) degrades gracefully, but ITP effectively limits persistence on Safari.
- Should we explore alternative persistence strategies for WebKit browsers?
- Is the 7-day cap acceptable for most analytics use cases, or do we need longer-term persistence?

### 4. Subdomain Inheritance Model

Currently, if `example.com` is DNS-verified, all subdomains (`blog.example.com`, `shop.example.com`) inherit verification automatically.

- Is automatic inheritance the right default, or should subdomains require explicit verification?
- Are there security implications of subdomain inheritance (e.g., compromised subdomain gaining cross-domain access)?
- Should there be a way to exclude specific subdomains?

### 5. Consent and Regulatory Position

Nylo's position is that pseudonymous identifiers that contain no PII and cannot be reversed to identify a person may qualify for "legitimate interest" processing under GDPR (no explicit consent required). The UK ICO's January 2025 guidance on fingerprinting complicates this.

- How should the SDK behave when a user's Consent Management Platform signals "analytics declined"?
- Should the SDK have a built-in consent mode that degrades to fully anonymous (no WaiTag) when consent is withheld?
- What's the community's reading of how WaiTags sit relative to GDPR's definition of "personal data"?

## How to Participate

Comment below with your thoughts on any of these questions. We're especially interested in:

- Real-world edge cases you've encountered with cross-domain tracking
- Privacy regulation expertise (GDPR, CCPA, ePrivacy)
- Browser behavior observations (especially Safari/WebKit and Firefox ETP)
- Alternative approaches we should consider

All constructive feedback is welcome.
